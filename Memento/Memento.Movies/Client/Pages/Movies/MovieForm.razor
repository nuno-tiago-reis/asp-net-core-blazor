@inherits MementoComponent<MovieForm>

@if (this.Movie == null)
{
	<h3>
		<i class="fas fa-spinner fa-pulse"></i> @this.Localizer.GetString(SharedResources.GENERIC_LOADING)...
	</h3>
}
else
{
	<EditForm Model="this.Movie"
			  OnValidSubmit="this.OnValidSubmitAsync"
			  OnInvalidSubmit="this.OnInvalidSubmit">

		<ValidationSummary />
		<DataAnnotationsValidator />

		<div class="row">
			<div class="col-md-12">
				<div class="form-group">
					<Label For="@(() => this.Movie.Name)">
					</Label>
					<InputText class="form-control"
							   @bind-value="this.Movie.Name">
					</InputText>
					<ValidationMessage For="@(() => this.Movie.Name)">
					</ValidationMessage>
				</div>
				<div class="form-group">
					<Label For="@(() => this.Movie.Summary)">
					</Label>
					<InputText class="form-control"
							   @bind-value="this.Movie.Summary">
					</InputText>
					<ValidationMessage For="@(() => this.Movie.Summary)">
					</ValidationMessage>
				</div>
				<div class="form-group">
					<Label For="@(() => this.Movie.PictureUrl)">
					</Label>
					<InputText class="form-control"
							   @bind-value="this.Movie.PictureUrl">
					</InputText>
					<ValidationMessage For="@(() => this.Movie.PictureUrl)">
					</ValidationMessage>
				</div>
				<div class="form-group">
					<Label For="@(() => this.Movie.TrailerUrl)">
					</Label>
					<InputText class="form-control"
							   @bind-value="this.Movie.TrailerUrl">
					</InputText>
					<ValidationMessage For="@(() => this.Movie.TrailerUrl)">
					</ValidationMessage>
				</div>
				<div class="form-group">
					<Label For="@(() => this.Movie.InTheaters)">
					</Label>
					<InputCheckbox class="form-control"
								   value="@(this.Movie.InTheaters != null ? this.Movie.InTheaters.Value : false)"
								   @onchange="@((@event) => this.Movie.InTheaters = (bool)@event.Value)">
					</InputCheckbox>
					<ValidationMessage For="@(() => this.Movie.InTheaters)">
					</ValidationMessage>
				</div>
				<div class="form-group">
					<Label For="@(() => this.Movie.ReleaseDate)">
					</Label>
					<InputDate class="form-control" TValue="DateTime"
							   value="@(this.Movie.ReleaseDate != null ? this.Movie.ReleaseDate.Value : DateTime.Today)"
							   @onchange="@((@event) => this.Movie.ReleaseDate = (DateTime)@event.Value)">
					</InputDate>
					<ValidationMessage For="@(() => this.Movie.ReleaseDate)">
					</ValidationMessage>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-md-12">
				<Button Color="NamedColor.Success" IsSubmit="true">
					<span class="fas fa-save"></span> @this.Localizer.GetString(SharedResources.BUTTON_SAVE_CHANGES)...
				</Button>
				<Button Color="NamedColor.Secondary" IsSubmit="false" OnClicked="this.OnCancelAsync">
					<span class="fas fa-trash"></span> @this.Localizer.GetString(SharedResources.BUTTON_DISCARD_CHANGES)...
				</Button>
			</div>
		</div>
	</EditForm>
}

<!-- save changes modal -->
<ConfirmationModal @ref="this.SaveChangesModal"
				   HeaderBackgroundColor="NamedColor.Success"
				   HeaderTextColor="NamedColor.White"
				   ConfirmButtonColor="NamedColor.Success"
				   ConfirmButtonCallback="this.OnSaveChangesConfirmedAsync"
				   CancelButtonColor="NamedColor.Secondary"
				   CancelButtonCallback="this.OnSaveChangesCancelledAsync">
	<!-- header -->
	<HeaderContent>
		<span class="fas fa-save"></span> @this.Localizer.GetString(SharedResources.MODAL_SAVE_CHANGES_TITLE)
	</HeaderContent>
	<!-- body -->
	<BodyContent>
		<p>@this.Localizer.GetString(SharedResources.MODAL_SAVE_CHANGES_BODY)</p>
	</BodyContent>
</ConfirmationModal>

<!-- discard changes modal -->
<ConfirmationModal @ref="this.DiscardChangesModal"
				   HeaderBackgroundColor="NamedColor.Warning"
				   HeaderTextColor="NamedColor.White"
				   ConfirmButtonColor="NamedColor.Warning"
				   ConfirmButtonCallback="this.OnDiscardChangesConfirmedAsync"
				   CancelButtonColor="NamedColor.Secondary"
				   CancelButtonCallback="this.OnDiscardChangesCancelledAsync">
	<!-- header -->
	<HeaderContent>
		<span class="fas fa-exclamation-triangle"></span> @this.Localizer.GetString(SharedResources.MODAL_DISCARD_CHANGES_TITLE)
	</HeaderContent>
	<!-- body -->
	<BodyContent>
		<p>@this.Localizer.GetString(SharedResources.MODAL_DISCARD_CHANGES_BODY)</p>
	</BodyContent>
</ConfirmationModal>